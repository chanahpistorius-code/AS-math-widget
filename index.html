<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AS Math Concepts Interactive Widget</title>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4bb543;
            --warning: #ffcc00;
            --danger: #dc3545;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            color: var(--dark);
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        header {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 20px 15px;
            text-align: center;
        }
        
        h1 {
            font-size: clamp(1.5rem, 4vw, 2.2rem);
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
            opacity: 0.9;
        }
        
        .content-area {
            display: flex;
            flex-direction: column;
            min-height: 600px;
        }
        
        @media (min-width: 768px) {
            .content-area {
                flex-direction: row;
            }
        }
        
        .sidebar {
            width: 100%;
            background-color: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            padding: 15px 0;
        }
        
        @media (min-width: 768px) {
            .sidebar {
                width: 250px;
                border-right: 1px solid #e9ecef;
                border-bottom: none;
            }
        }
        
        .concept-list {
            list-style: none;
            display: flex;
            overflow-x: auto;
            padding-bottom: 10px;
            gap: 5px;
        }
        
        @media (min-width: 768px) {
            .concept-list {
                display: block;
                overflow-x: visible;
                padding-bottom: 0;
            }
        }
        
        .concept-item {
            padding: 12px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 4px solid transparent;
            white-space: nowrap;
            flex-shrink: 0;
            border-radius: 6px;
            font-size: 0.9rem;
        }
        
        @media (min-width: 768px) {
            .concept-item {
                border-bottom: none;
                border-left: 4px solid transparent;
                border-radius: 0;
                font-size: 1rem;
            }
        }
        
        .concept-item:hover {
            background-color: #e9ecef;
        }
        
        .concept-item.active {
            background-color: white;
            border-bottom: 4px solid var(--primary);
            font-weight: 600;
            color: var(--primary);
        }
        
        @media (min-width: 768px) {
            .concept-item.active {
                border-bottom: none;
                border-left: 4px solid var(--primary);
            }
        }
        
        .main-content {
            flex: 1;
            padding: 20px 15px;
            overflow-y: auto;
        }
        
        @media (min-width: 768px) {
            .main-content {
                padding: 30px;
            }
        }
        
        .concept-section {
            display: none;
        }
        
        .concept-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h2 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: clamp(1.4rem, 3.5vw, 1.8rem);
        }
        
        .explanation {
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: clamp(0.95rem, 2vw, 1.05rem);
        }
        
        .example-box {
            background-color: #f8f9fa;
            border-left: 4px solid var(--accent);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        @media (min-width: 768px) {
            .example-box {
                padding: 20px;
                margin: 20px 0;
            }
        }
        
        .interactive-area {
            background-color: #f0f4f8;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        
        @media (min-width: 768px) {
            .interactive-area {
                padding: 20px;
                margin: 25px 0;
            }
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        @media (min-width: 768px) {
            .controls {
                gap: 15px;
                margin: 20px 0;
            }
        }
        
        button {
            padding: 10px 16px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.9rem;
            flex: 1;
            min-width: 120px;
        }
        
        @media (min-width: 480px) {
            button {
                flex: 0 1 auto;
            }
        }
        
        button:hover {
            background-color: var(--secondary);
            transform: translateY(-2px);
        }
        
        button.secondary {
            background-color: #6c757d;
        }
        
        button.secondary:hover {
            background-color: #5a6268;
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .slider-container {
            margin: 12px 0;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #dde1e7;
            outline: none;
        }
        
        .graph-container {
            width: 100%;
            height: 250px;
            background-color: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
        }
        
        @media (min-width: 768px) {
            .graph-container {
                height: 300px;
                margin: 20px 0;
            }
        }
        
        .step-container {
            margin: 20px 0;
        }
        
        .step {
            display: none;
            padding: 12px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 12px;
            font-size: 0.95rem;
        }
        
        @media (min-width: 768px) {
            .step {
                padding: 15px;
                margin-bottom: 15px;
            }
        }
        
        .step.active {
            display: block;
            animation: slideIn 0.4s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .step-number {
            display: inline-block;
            width: 28px;
            height: 28px;
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            margin-right: 10px;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        @media (min-width: 768px) {
            .step-number {
                width: 30px;
                height: 30px;
                line-height: 30px;
            }
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            gap: 10px;
        }
        
        @media (min-width: 768px) {
            .navigation {
                margin-top: 20px;
            gap: 15px;
            justify-content: space-between;
            flex-wrap: nowrap;
            flex-direction: row;
            align-items: center;
            width: 100%;
            max-width: 400px;
                margin-left: auto;
                margin-right: auto;
            }
        }
        
        .math-expression {
            font-family: 'Cambria Math', serif;
            font-size: clamp(1rem, 3vw, 1.2rem);
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 4px;
            margin: 10px 0;
            text-align: center;
            overflow-x: auto;
            white-space: nowrap;
        }
        
        .highlight {
            background-color: #fff3cd;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .explanation-box {
            background-color: #e9f7fe;
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
            border-left: 4px solid var(--accent);
            font-size: 0.9rem;
        }
        
        @media (min-width: 768px) {
            .explanation-box {
                padding: 15px;
                margin-top: 15px;
            }
        }
        
        /* Mobile-specific adjustments */
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .container {
                border-radius: 8px;
            }
            
            header {
                padding: 15px 10px;
            }
            
            .main-content {
                padding: 15px 10px;
            }
            
            .interactive-area {
                padding: 12px;
            }
            
            .controls {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
            
            .navigation {
                flex-direction: column;
            }
            
            .navigation button {
                width: 100%;
            }
        }
        
        /* Tablet-specific adjustments */
        @media (min-width: 481px) and (max-width: 767px) {
            .navigation {
                flex-wrap: wrap;
            }
            
            .navigation button {
                flex: 1;
                min-width: 140px;
            }
        }
        
        /* Large screen adjustments */
        @media (min-width: 1200px) {
            .container {
                margin-top: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>AS Math Concepts Interactive Widget</h1>
            <p class="subtitle">Explore key mathematical concepts with step-by-step guidance and interactive examples</p>
        </header>
        
        <div class="content-area">
            <div class="sidebar">
                <ul class="concept-list">
                    <li class="concept-item active" data-concept="factorizing">Factorizing</li>
                    <li class="concept-item" data-concept="simultaneous-equations">Simultaneous Equations</li>
                    <li class="concept-item" data-concept="transformations">Transformations</li>
                </ul>
            </div>
            
            <div class="main-content">
                <!-- Factorizing Section -->
                <div class="concept-section active" id="factorizing">
                    <h2>Factorizing</h2>
                    <div class="explanation">
                        <p>Factorizing is the process of breaking down an expression into simpler factors that, when multiplied together, give the original expression. This is a fundamental skill in algebra that helps solve equations and simplify expressions.</p>
                    </div>
                    
                    <div class="example-box">
                        <h3>Example: Factorizing Quadratics</h3>
                        <p>Consider the quadratic expression: <span class="math-expression">x² + 5x + 6</span></p>
                        <p>We look for two numbers that multiply to give 6 (the constant term) and add to give 5 (the coefficient of x).</p>
                        <p>The numbers 2 and 3 satisfy these conditions: 2 × 3 = 6 and 2 + 3 = 5.</p>
                        <p>Therefore: <span class="math-expression">x² + 5x + 6 = (x + 2)(x + 3)</span></p>
                    </div>
                    
                    <div class="interactive-area">
                        <h3>Interactive Factorizing</h3>
                        <p>Try factorizing different quadratic expressions:</p>
                        
                        <div class="controls">
                            <button id="factorize-btn">Factorize</button>
                            <button id="reset-factorize" class="secondary">Reset</button>
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Coefficient of x: <span id="coeff-x-value">5</span></span>
                            </div>
                            <input type="range" id="coeff-x" min="1" max="10" value="5">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Constant term: <span id="constant-value">6</span></span>
                            </div>
                            <input type="range" id="constant" min="1" max="20" value="6">
                        </div>
                        
                        <div class="math-expression" id="factorize-expression">x² + 5x + 6</div>
                        <div class="math-expression" id="factorize-result"></div>
                        
                        <div id="factorize-explanation" class="explanation-box" style="display: none;">
                            <h4>Explanation:</h4>
                            <p id="explanation-text"></p>
                        </div>
                    </div>
                    
                    <div class="step-container">
                        <h3>Step-by-Step Guide</h3>
                        <div class="step active" id="factor-step-1">
                            <span class="step-number">1</span>
                            <span>Identify the quadratic expression in the form ax² + bx + c</span>
                        </div>
                        <div class="step" id="factor-step-2">
                            <span class="step-number">2</span>
                            <span>Find two numbers that multiply to give ac and add to give b</span>
                        </div>
                        <div class="step" id="factor-step-3">
                            <span class="step-number">3</span>
                            <span>Rewrite the middle term using these two numbers</span>
                        </div>
                        <div class="step" id="factor-step-4">
                            <span class="step-number">4</span>
                            <span>Factor by grouping</span>
                        </div>
                        <div class="step" id="factor-step-5">
                            <span class="step-number">5</span>
                            <span>Write the final factored form</span>
                        </div>
                        
                        <div class="navigation">
                            <button id="prev-factor-step" class="secondary">Previous</button>
                            <button id="next-factor-step">Next</button>
                        </div>
                    </div>
                </div>
                
                <!-- Simultaneous Equations Section -->
                <div class="concept-section" id="simultaneous-equations">
                    <h2>Simultaneous Equations</h2>
                    <div class="explanation">
                        <p>Simultaneous equations are a set of equations with multiple variables that are solved together. The solution is the set of values that satisfies all equations simultaneously. Common methods include substitution, elimination, and graphical methods.</p>
                    </div>
                    
                    <div class="example-box">
                        <h3>Example: Solving Simultaneous Equations</h3>
                        <p>Consider the equations:</p>
                        <p><span class="math-expression">2x + y = 7</span></p>
                        <p><span class="math-expression">x - y = 2</span></p>
                        <p>Using the elimination method, add the two equations:</p>
                        <p><span class="math-expression">(2x + y) + (x - y) = 7 + 2</span></p>
                        <p><span class="math-expression">3x = 9</span></p>
                        <p><span class="math-expression">x = 3</span></p>
                        <p>Substitute x = 3 into the second equation:</p>
                        <p><span class="math-expression">3 - y = 2</span></p>
                        <p><span class="math-expression">y = 1</span></p>
                        <p>Solution: <span class="math-expression">x = 3, y = 1</span></p>
                    </div>
                    
                    <div class="interactive-area">
                        <h3>Interactive Simultaneous Equations</h3>
                        <p>Try solving different simultaneous equations:</p>
                        
                        <div class="controls">
                            <button id="solve-simultaneous-btn">Solve</button>
                            <button id="reset-simultaneous" class="secondary">Reset</button>
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Equation 1: <span id="eq1-value">2x + y = 7</span></span>
                            </div>
                            <input type="range" id="eq1-slider" min="1" max="5" value="2">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Equation 2: <span id="eq2-value">x - y = 2</span></span>
                            </div>
                            <input type="range" id="eq2-slider" min="1" max="5" value="1">
                        </div>
                        
                        <div class="math-expression" id="simultaneous-expression-1">2x + y = 7</div>
                        <div class="math-expression" id="simultaneous-expression-2">x - y = 2</div>
                        <div class="math-expression" id="simultaneous-result"></div>
                    </div>
                </div>
                
                <!-- Transformations Section -->
                <div class="concept-section" id="transformations">
                    <h2>Transformation Functions</h2>
                    <div class="explanation">
                        <p>Transformations modify the graph of a function. Common transformations include:</p>
                        <ul>
                            <li>Translation: Shifting the graph horizontally or vertically</li>
                            <li>Reflection: Flipping the graph across an axis</li>
                            <li>Stretch: Changing the scale of the graph</li>
                        </ul>
                    </div>
                    
                    <div class="example-box">
                        <h3>Example: Function Transformations</h3>
                        <p>Consider the base function: <span class="math-expression">f(x) = x²</span></p>
                        <p>Transformations:</p>
                        <ul>
                            <li><span class="math-expression">f(x) + 2 = x² + 2</span> (vertical translation up by 2)</li>
                            <li><span class="math-expression">f(x - 3) = (x - 3)²</span> (horizontal translation right by 3)</li>
                            <li><span class="math-expression">2f(x) = 2x²</span> (vertical stretch by factor 2)</li>
                            <li><span class="math-expression">f(-x) = (-x)² = x²</span> (reflection in y-axis)</li>
                        </ul>
                    </div>
                    
                    <div class="interactive-area">
                        <h3>Interactive Transformations</h3>
                        <p>Explore how different transformations affect the graph of a function:</p>
                        
                        <div class="controls">
                            <button id="reset-transformation" class="secondary">Reset</button>
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Horizontal Translation: <span id="horizontal-value">0</span></span>
                            </div>
                            <input type="range" id="horizontal-translation" min="-5" max="5" value="0">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Vertical Translation: <span id="vertical-value">0</span></span>
                            </div>
                            <input type="range" id="vertical-translation" min="-5" max="5" value="0">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Vertical Stretch: <span id="stretch-value">1</span></span>
                            </div>
                            <input type="range" id="vertical-stretch" min="0.5" max="3" step="0.1" value="1">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Reflection: <span id="reflection-value">None</span></span>
                            </div>
                            <input type="range" id="reflection" min="0" max="2" value="0">
                        </div>
                        
                        <div class="math-expression" id="transformation-expression">f(x) = x²</div>
                        <div class="math-expression" id="transformation-result"></div>
                        
                        <div class="graph-container" id="transformation-graph">
                            <canvas id="graph-canvas"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Navigation between concepts
        document.querySelectorAll('.concept-item').forEach(item => {
            item.addEventListener('click', function() {
                // Remove active class from all items
                document.querySelectorAll('.concept-item').forEach(i => {
                    i.classList.remove('active');
                });
                
                // Add active class to clicked item
                this.classList.add('active');
                
                // Hide all concept sections
                document.querySelectorAll('.concept-section').forEach(section => {
                    section.classList.remove('active');
                });
                
                // Show the selected concept section
                const conceptId = this.getAttribute('data-concept');
                document.getElementById(conceptId).classList.add('active');
                
                // Redraw graph if we're on transformations
                if (conceptId === 'transformations') {
                    resizeCanvas();
                    drawGraph();
                }
            });
        });
        
        // Factorizing interactive elements
        const coeffXSlider = document.getElementById('coeff-x');
        const constantSlider = document.getElementById('constant');
        const coeffXValue = document.getElementById('coeff-x-value');
        const constantValue = document.getElementById('constant-value');
        const factorizeExpression = document.getElementById('factorize-expression');
        const factorizeResult = document.getElementById('factorize-result');
        const factorizeBtn = document.getElementById('factorize-btn');
        const resetFactorizeBtn = document.getElementById('reset-factorize');
        const factorizeExplanation = document.getElementById('factorize-explanation');
        const explanationText = document.getElementById('explanation-text');
        
        coeffXSlider.addEventListener('input', function() {
            coeffXValue.textContent = this.value;
            updateFactorizeExpression();
        });
        
        constantSlider.addEventListener('input', function() {
            constantValue.textContent = this.value;
            updateFactorizeExpression();
        });
        
        function updateFactorizeExpression() {
            const a = 1; // coefficient of x² is always 1 in this simplified example
            const b = parseInt(coeffXSlider.value);
            const c = parseInt(constantSlider.value);
            
            let expression = 'x²';
            if (b > 0) {
                expression += ` + ${b}x`;
            } else if (b < 0) {
                expression += ` - ${Math.abs(b)}x`;
            }
            
            if (c > 0) {
                expression += ` + ${c}`;
            } else if (c < 0) {
                expression += ` - ${Math.abs(c)}`;
            }
            
            factorizeExpression.textContent = expression;
        }
        
        factorizeBtn.addEventListener('click', function() {
            const b = parseInt(coeffXSlider.value);
            const c = parseInt(constantSlider.value);
            
            // Find factors
            let factor1, factor2;
            let found = false;
            
            for (let i = -20; i <= 20; i++) {
                for (let j = -20; j <= 20; j++) {
                    if (i * j === c && i + j === b) {
                        factor1 = i;
                        factor2 = j;
                        found = true;
                        break;
                    }
                }
                if (found) break;
            }
            
            if (found) {
                let result = '(x';
                if (factor1 > 0) {
                    result += ` + ${factor1}`;
                } else if (factor1 < 0) {
                    result += ` - ${Math.abs(factor1)}`;
                }
                result += ')(x';
                if (factor2 > 0) {
                    result += ` + ${factor2}`;
                } else if (factor2 < 0) {
                    result += ` - ${Math.abs(factor2)}`;
                }
                result += ')';
                
                factorizeResult.textContent = result;
                
                // Show explanation
                explanationText.innerHTML = `
                    We need to find two numbers that multiply to give ${c} (the constant term) and add to give ${b} (the coefficient of x).<br>
                    The numbers ${factor1} and ${factor2} satisfy these conditions because:<br>
                    ${factor1} × ${factor2} = ${c} and ${factor1} + ${factor2} = ${b}.<br>
                    Therefore, we can factorize the expression as shown above.
                `;
                factorizeExplanation.style.display = 'block';
            } else {
                factorizeResult.textContent = 'Cannot be factored with integer factors';
                factorizeExplanation.style.display = 'none';
            }
        });
        
        resetFactorizeBtn.addEventListener('click', function() {
            coeffXSlider.value = 5;
            constantSlider.value = 6;
            coeffXValue.textContent = '5';
            constantValue.textContent = '6';
            factorizeResult.textContent = '';
            factorizeExplanation.style.display = 'none';
            updateFactorizeExpression();
        });
        
        // Step navigation for factorizing
        let currentFactorStep = 1;
        const totalFactorSteps = 5;
        
        document.getElementById('next-factor-step').addEventListener('click', function() {
            if (currentFactorStep < totalFactorSteps) {
                document.getElementById(`factor-step-${currentFactorStep}`).classList.remove('active');
                currentFactorStep++;
                document.getElementById(`factor-step-${currentFactorStep}`).classList.add('active');
            }
            
            // Update button states
            updateFactorStepButtons();
        });
        
        document.getElementById('prev-factor-step').addEventListener('click', function() {
            if (currentFactorStep > 1) {
                document.getElementById(`factor-step-${currentFactorStep}`).classList.remove('active');
                currentFactorStep--;
                document.getElementById(`factor-step-${currentFactorStep}`).classList.add('active');
            }
            
            // Update button states
            updateFactorStepButtons();
        });
        
        function updateFactorStepButtons() {
            const prevBtn = document.getElementById('prev-factor-step');
            const nextBtn = document.getElementById('next-factor-step');
            
            prevBtn.disabled = currentFactorStep === 1;
            nextBtn.disabled = currentFactorStep === totalFactorSteps;
            
            if (prevBtn.disabled) {
                prevBtn.style.opacity = '0.5';
                prevBtn.style.cursor = 'not-allowed';
            } else {
                prevBtn.style.opacity = '1';
                prevBtn.style.cursor = 'pointer';
            }
            
            if (nextBtn.disabled) {
                nextBtn.style.opacity = '0.5';
                nextBtn.style.cursor = 'not-allowed';
            } else {
                nextBtn.style.opacity = '1';
                nextBtn.style.cursor = 'pointer';
            }
        }
        
        // Initialize step buttons
        updateFactorStepButtons();
        
        // Simultaneous equations interactive elements
        const eq1Slider = document.getElementById('eq1-slider');
        const eq2Slider = document.getElementById('eq2-slider');
        const eq1Value = document.getElementById('eq1-value');
        const eq2Value = document.getElementById('eq2-value');
        const simultaneousExpression1 = document.getElementById('simultaneous-expression-1');
        const simultaneousExpression2 = document.getElementById('simultaneous-expression-2');
        const simultaneousResult = document.getElementById('simultaneous-result');
        const solveSimultaneousBtn = document.getElementById('solve-simultaneous-btn');
        const resetSimultaneousBtn = document.getElementById('reset-simultaneous');
        
        eq1Slider.addEventListener('input', function() {
            const value = parseInt(this.value);
            eq1Value.textContent = `${value}x + y = ${value + 5}`;
            simultaneousExpression1.textContent = `${value}x + y = ${value + 5}`;
        });
        
        eq2Slider.addEventListener('input', function() {
            const value = parseInt(this.value);
            eq2Value.textContent = `${value}x - y = ${value + 1}`;
            simultaneousExpression2.textContent = `${value}x - y = ${value + 1}`;
        });
        
        solveSimultaneousBtn.addEventListener('click', function() {
            const a1 = parseInt(eq1Slider.value);
            const b1 = 1;
            const c1 = a1 + 5;
            
            const a2 = parseInt(eq2Slider.value);
            const b2 = -1;
            const c2 = a2 + 1;
            
            // Solve using elimination method
            // Multiply first equation by b2 and second by b1
            const coeff1 = a1 * b2;
            const coeff2 = a2 * b1;
            
            // Subtract equations to eliminate y
            const xCoeff = coeff1 - coeff2;
            const constant = c1 * b2 - c2 * b1;
            
            if (xCoeff === 0) {
                simultaneousResult.textContent = 'No unique solution (lines are parallel or coincident)';
                return;
            }
            
            const x = constant / xCoeff;
            
            // Substitute x back into first equation to find y
            const y = c1 - a1 * x;
            
            simultaneousResult.textContent = `Solution: x = ${x.toFixed(2)}, y = ${y.toFixed(2)}`;
        });
        
        resetSimultaneousBtn.addEventListener('click', function() {
            eq1Slider.value = 2;
            eq2Slider.value = 1;
            eq1Value.textContent = '2x + y = 7';
            eq2Value.textContent = 'x - y = 2';
            simultaneousExpression1.textContent = '2x + y = 7';
            simultaneousExpression2.textContent = 'x - y = 2';
            simultaneousResult.textContent = '';
        });
        
        // Transformations interactive elements
        const horizontalTranslationSlider = document.getElementById('horizontal-translation');
        const verticalTranslationSlider = document.getElementById('vertical-translation');
        const verticalStretchSlider = document.getElementById('vertical-stretch');
        const reflectionSlider = document.getElementById('reflection');
        const horizontalValue = document.getElementById('horizontal-value');
        const verticalValue = document.getElementById('vertical-value');
        const stretchValue = document.getElementById('stretch-value');
        const reflectionValue = document.getElementById('reflection-value');
        const transformationExpression = document.getElementById('transformation-expression');
        const transformationResult = document.getElementById('transformation-result');
        const resetTransformationBtn = document.getElementById('reset-transformation');
        const canvas = document.getElementById('graph-canvas');
        const ctx = canvas.getContext('2d');
        
        // Responsive canvas setup
        function resizeCanvas() {
            const graphContainer = document.getElementById('transformation-graph');
            canvas.width = graphContainer.clientWidth;
            canvas.height = graphContainer.clientHeight;
            drawGraph();
        }
        
        // Initial resize and on window resize
        window.addEventListener('resize', resizeCanvas);
        
        horizontalTranslationSlider.addEventListener('input', function() {
            horizontalValue.textContent = this.value;
            updateTransformation();
        });
        
        verticalTranslationSlider.addEventListener('input', function() {
            verticalValue.textContent = this.value;
            updateTransformation();
        });
        
        verticalStretchSlider.addEventListener('input', function() {
            stretchValue.textContent = this.value;
            updateTransformation();
        });
        
        reflectionSlider.addEventListener('input', function() {
            const value = parseInt(this.value);
            if (value === 0) {
                reflectionValue.textContent = 'None';
            } else if (value === 1) {
                reflectionValue.textContent = 'X-axis';
            } else {
                reflectionValue.textContent = 'Y-axis';
            }
            updateTransformation();
        });
        
        function updateTransformation() {
            const h = parseInt(horizontalTranslationSlider.value);
            const v = parseInt(verticalTranslationSlider.value);
            const s = parseFloat(verticalStretchSlider.value);
            const r = parseInt(reflectionSlider.value);
            
            let result = 'f(x) = ';
            
            if (r === 1) {
                result += '-';
            }
            
            if (s !== 1) {
                result += `${s}`;
            }
            
            if (r === 2) {
                result += '(-x';
            } else {
                result += '(x';
            }
            
            if (h > 0) {
                result += ` - ${h}`;
            } else if (h < 0) {
                result += ` + ${Math.abs(h)}`;
            }
            
            result += ')²';
            
            if (v > 0) {
                result += ` + ${v}`;
            } else if (v < 0) {
                result += ` - ${Math.abs(v)}`;
            }
            
            transformationResult.textContent = result;
            drawGraph();
        }
        
        function drawGraph() {
            const h = parseInt(horizontalTranslationSlider.value);
            const v = parseInt(verticalTranslationSlider.value);
            const s = parseFloat(verticalStretchSlider.value);
            const r = parseInt(reflectionSlider.value);
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Set up coordinate system
            const width = canvas.width;
            const height = canvas.height;
            const originX = width / 2;
            const originY = height / 2;
            const scale = Math.min(width, height) / 20; // Responsive scale
            
            // Draw axes
            ctx.strokeStyle = '#ccc';
            ctx.lineWidth = 1;
            ctx.beginPath();
            // X-axis
            ctx.moveTo(0, originY);
            ctx.lineTo(width, originY);
            // Y-axis
            ctx.moveTo(originX, 0);
            ctx.lineTo(originX, height);
            ctx.stroke();
            
            // Draw grid
            ctx.strokeStyle = '#f0f0f0';
            ctx.lineWidth = 0.5;
            // Vertical lines
            for (let x = -10; x <= 10; x++) {
                if (x === 0) continue;
                ctx.beginPath();
                ctx.moveTo(originX + x * scale, 0);
                ctx.lineTo(originX + x * scale, height);
                ctx.stroke();
            }
            // Horizontal lines
            for (let y = -10; y <= 10; y++) {
                if (y === 0) continue;
                ctx.beginPath();
                ctx.moveTo(0, originY + y * scale);
                ctx.lineTo(width, originY + y * scale);
                ctx.stroke();
            }
            
            // Draw original function (f(x) = x²) in light gray
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let x = -10; x <= 10; x += 0.1) {
                const y = x * x;
                const canvasX = originX + x * scale;
                const canvasY = originY - y * scale;
                if (x === -10) {
                    ctx.moveTo(canvasX, canvasY);
                } else {
                    ctx.lineTo(canvasX, canvasY);
                }
            }
            ctx.stroke();
            
            // Draw transformed function
            ctx.strokeStyle = '#4361ee';
            ctx.lineWidth = 3;
            ctx.beginPath();
            for (let x = -10; x <= 10; x += 0.1) {
                let transformedX = x;
                let transformedY = 0;
                
                // Apply transformations
                if (r === 2) { // Reflection in y-axis
                    transformedX = -x;
                }
                
                transformedX = transformedX - h; // Horizontal translation
                transformedY = s * transformedX * transformedX; // Vertical stretch and base function
                
                if (r === 1) { // Reflection in x-axis
                    transformedY = -transformedY;
                }
                
                transformedY = transformedY + v; // Vertical translation
                
                const canvasX = originX + x * scale;
                const canvasY = originY - transformedY * scale;
                
                if (x === -10) {
                    ctx.moveTo(canvasX, canvasY);
                } else {
                    ctx.lineTo(canvasX, canvasY);
                }
            }
            ctx.stroke();
            
            // Draw axis labels (only if there's enough space)
            if (width > 400) {
                ctx.fillStyle = '#666';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'top';
                // X-axis labels
                for (let x = -8; x <= 8; x += 2) {
                    if (x === 0) continue;
                    ctx.fillText(x, originX + x * scale, originY + 5);
                }
                // Y-axis labels
                ctx.textAlign = 'right';
                ctx.textBaseline = 'middle';
                for (let y = -8; y <= 8; y += 2) {
                    if (y === 0) continue;
                    ctx.fillText(y, originX - 5, originY + y * scale);
                }
                
                // Draw origin label
                ctx.textAlign = 'right';
                ctx.textBaseline = 'top';
                ctx.fillText('0', originX - 5, originY + 5);
            }
        }
        
        resetTransformationBtn.addEventListener('click', function() {
            horizontalTranslationSlider.value = 0;
            verticalTranslationSlider.value = 0;
            verticalStretchSlider.value = 1;
            reflectionSlider.value = 0;
            horizontalValue.textContent = '0';
            verticalValue.textContent = '0';
            stretchValue.textContent = '1';
            reflectionValue.textContent = 'None';
            transformationResult.textContent = '';
            drawGraph();
        });
        
        // Initialize expressions and graph
        updateFactorizeExpression();
        updateTransformation();
        resizeCanvas();
    </script>
</body>
</html>
